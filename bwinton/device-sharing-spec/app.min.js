/*! device-sharing-react 19-01-2015 */

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}],2:[function(a){var b=a("./views/Desktop.jsx");moment.lang("en",{calendar:{lastDay:"[Yesterday at] LT",sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",lastWeek:"l [at] LT",nextWeek:"l [at] LT",sameElse:"L"}}),setTimeout(function(){var a=$("<div/>",{"class":"component-wrapper"})[0];$("#wrapper").append(a),React.renderComponent(b(null),a),$(".tip").tipr({mode:"top",speed:200}),window.addEventListener("message",function(a){"whimsy:enabled"===a.data&&document.querySelector("body").classList.add("whimsical")},!1)},100)},{"./views/Desktop.jsx":6}],3:[function(a,b){var c=a("events").EventEmitter;b.exports=Dispatcher=new c},{events:1}],4:[function(a,b){b.exports={animation:{duration:200,easing:"easeInSine",queue:!1}}},{}],5:[function(a,b){b.exports=React.createClass({displayName:"exports",render:function(){var a,b,c;return this.props.icon&&(a=React.DOM.i({className:"fa fa-"+this.props.icon})),this.props.hasRightChevron&&(b=React.DOM.span({className:"chevron"}," ▾ ")),this.props.children&&(dropdownClass="Dropdown "+(this.props.showDropdown?"show":"hide"),c=React.DOM.div({className:dropdownClass},this.props.children)),React.DOM.div({className:"ButtonContainer"},React.DOM.div({id:this.props.id,onClick:this.props.onClick,className:"Button "+this.props.style},this.props.text,a,b),c)}})},{}],6:[function(a,b){var c=a("./Button.jsx"),d=a("../utils/Dispatcher"),e=a("./GlobalSharing.jsx"),f=a("./UrlbarSharing.jsx");b.exports=React.createClass({displayName:"exports",getInitialState:function(){var a=[{name:"Camera",type:"camera",status:"none",values:["Don’t share my camera","Facetime HD Camera","External Camera"],selected:1},{name:"Audio",type:"microphone",typeExt:"gif",status:"none",values:["Don’t share my microphone","Built-in Microphone","External Microphone"],selected:1},{name:"Screen",type:"screen",status:"none",values:["Don’t share my screen","Entire Screen","Firefox - Start Page","Firefox - CloudApp"],selected:-1}];return{highlight:"",sharing:"requested",isSharingVisible:!1,isUrlbarDropdownVisible:!1,isGlobalDropdownVisible:!1,devices:a}},selectDevice:function(a,b){this.state.devices[a].selected=b,this.setState(this.state)},muteDevice:function(a){var b=this.state.devices[a].status;"enabled"===b?this.state.devices[a].status="muted":"muted"===b&&(this.state.devices[a].status="enabled"),this.setState(this.state)},setHighlight:function(a){this.setState({highlight:"highlight-"+a})},clearHighlight:function(){this.setState({highlight:""})},requestSharing:function(){var a=this.state.sharing;this.state.isSharingVisible?(this.state.devices[2].status="requested",this.state.devices[2].selected=0):(a="requested",this.state.devices[0].status="requested",this.state.devices[1].status="requested",this.state.devices[2].status="none"),this.setState({sharing:a,isSharingVisible:!0,isUrlbarDropdownVisible:!0,isGlobalDropdownVisible:!1,devices:this.state.devices})},stopSharing:function(){this.state.devices.forEach(function(a){a.status="none"}),this.setState({sharing:"requested",isSharingVisible:!1,isUrlbarDropdownVisible:!1,isGlobalDropdownVisible:!1,devices:this.state.devices})},toggleGlobalDropdown:function(){var a=!this.state.isGlobalDropdownVisible,b=a?!1:this.state.isUrlbarDropdownVisible;this.setState({isGlobalDropdownVisible:a,isUrlbarDropdownVisible:b})},toggleUrlbarDropdown:function(){var a=!this.state.isUrlbarDropdownVisible,b=a?!1:this.state.isGlobalDropdownVisible;this.setState({isUrlbarDropdownVisible:a,isGlobalDropdownVisible:b})},shareDevices:function(){var a=!this.state.isUrlbarDropdownVisible,b=(a?!1:this.state.isGlobalDropdownVisible,this.state.devices);b.forEach(function(a){a.selected>0&&(a.status="enabled")}),this.setState({sharing:"enabled",isUrlbarDropdownVisible:!1,isGlobalDropdownVisible:!1,devices:b})},componentWillMount:function(){this.listeners={"device:select":this.selectDevice,"device:mute":this.muteDevice,"highlight:set":this.setHighlight,"highlight:clear":this.clearHighlight};for(var a in this.listeners)d.on(a,this.listeners[a])},componentWillUnmount:function(){for(var a in this.listeners)d.off(a,this.listeners[a])},render:function(){var a="Request sharing",b="";return this.state.isSharingVisible&&(a="Request more sharing",b=c({text:"Stop sharing",style:"default",id:"stopSharing",onClick:this.stopSharing})),React.DOM.div(null,React.DOM.div({className:"FullImage full-screen "+this.state.highlight},e({sharing:this.state.sharing,isSharingVisible:"enabled"==this.state.sharing,isDropdownVisible:this.state.isGlobalDropdownVisible,toggleDropdown:this.toggleGlobalDropdown,devices:this.state.devices,shareDevices:this.shareDevices}),f({sharing:this.state.sharing,isSharingVisible:this.state.isSharingVisible,isDropdownVisible:this.state.isUrlbarDropdownVisible,toggleDropdown:this.toggleUrlbarDropdown,devices:this.state.devices,shareDevices:this.shareDevices}),React.DOM.div({id:"shareButtons"},c({text:a,style:"default",id:"requestSharing",onClick:this.requestSharing}),b)))}})},{"../utils/Dispatcher":3,"./Button.jsx":5,"./GlobalSharing.jsx":8,"./UrlbarSharing.jsx":13}],7:[function(a,b){var c=a("./Button.jsx");b.exports=React.createClass({displayName:"exports",render:function(){return React.DOM.div({className:"Footer"},c({text:"Share selected devices",hasRightChevron:!0,style:"default",onClick:this.props.shareDevices}))}})},{"./Button.jsx":5}],8:[function(a,b){var c=a("./SharingDoorhanger.jsx"),d=a("./SharingIndicator.jsx");b.exports=React.createClass({displayName:"exports",render:function(){return React.DOM.div(null,d({id:"global-indicator",sharing:this.props.sharing,isSharingVisible:this.props.isSharingVisible,toggleDropdown:this.props.toggleDropdown,devices:this.props.devices}),c(Object.assign({},this.props)))}})},{"./SharingDoorhanger.jsx":11,"./SharingIndicator.jsx":12}],9:[function(a,b){var c=a("./Button.jsx");b.exports=React.createClass({displayName:"exports",render:function(){return React.DOM.div({className:"Panel "+(this.props.extraClass||"")},React.DOM.div({className:"title"},React.DOM.span(null,"mozilla.org"),c({style:"minimal",icon:"times",onClick:this.props.toggleDropdown})),this.props.children)}})},{"./Button.jsx":5}],10:[function(a,b){_animationDefaults=a("../utils/defaults.js").animation,b.exports=React.createClass({displayName:"exports",getInitialState:function(){return{isMoved:!1}},slideTo:function(a){$(this.refs.slider.getDOMNode()).velocity({translateX:a},_animationDefaults)},toggle:function(){this.slideTo(this.state.isMoved?0:"-48%"),this.setState({isMoved:!this.state.isMoved})},componentDidMount:function(){var a=this;$(this.getDOMNode()).on("PanelGroup",function(b,c){switch(c.type){case"toggle":a.toggle();break;case"back":a.slideTo(0),a.setState({isMoved:!1})}})},componentWillUnmount:function(){$(this.getDOMNode()).off("PanelGroup::toggle")},render:function(){var a=this.state.isMoved?"moved":null,b=["PanelGroup",a].join(" ");return React.DOM.div({className:b},React.DOM.div({ref:"slider",className:"PanelGroupInner"},this.props.children))}})},{"../utils/defaults.js":4}],11:[function(a,b){var c=a("./Button.jsx"),d=a("../utils/Dispatcher"),e=a("./Footer.jsx"),f=a("./Panel.jsx"),g=a("./PanelGroup.jsx");b.exports=React.createClass({displayName:"exports",showPanel:function(a){a.panel=!a.panel,this.forceUpdate()},selectDevice:function(a,b){d.emit("device:select",a,b),this.showPanel(this.props.devices[a])},muteDevice:function(a){d.emit("device:mute",a)},onItemOver:function(a,b){var c=this.props.devices[a];"screen"===c.type&&d.emit("highlight:set",b)},onItemOut:function(a,b){var c=this.props.devices[a];"screen"===c.type&&d.emit("highlight:clear",b)},itemForDevice:function(a,b,c){return React.DOM.div({className:"dropdownItem",onMouseOver:this.onItemOver.bind(this,a,c),onMouseOut:this.onItemOut.bind(this,a,c),onClick:this.selectDevice.bind(this,a,c)},b)},getDeviceClass:function(a){return"Device "+a.status},requestForDevice:function(a,b){var d="images/device-icon-"+a.type+"."+(a.typeExt||"png");return"requested"!=a.status?"":React.DOM.div({className:this.getDeviceClass(a),key:a.name},React.DOM.div({className:"group"},a.name),React.DOM.img({src:d}),c({text:a.values[a.selected],hasRightChevron:"true",style:"default",showDropdown:a.panel,onClick:this.showPanel.bind(this,a)},React.DOM.div(null,a.values.map(this.itemForDevice.bind(this,b)))))},shareForDevice:function(a,b){var d="images/device-icon-"+a.type+"."+(a.typeExt||"png");return React.DOM.div({className:this.getDeviceClass(a),key:a.name},React.DOM.img({src:d}),React.DOM.div({className:"name"},a.values[a.selected]),c({text:"muted"===a.status?"Unmute":"Mute",hasRightChevron:"true",style:"default",onClick:this.muteDevice.bind(this,b)},"// ",React.DOM.div(null,a.values.map(this.itemForDevice.bind(this,b)))))},render:function(){var a="",b="",c="";return"requested"===this.props.sharing?(a=React.DOM.span(null,"This site would like to access:"),b=this.props.devices.map(this.requestForDevice),c=e({shareDevices:this.props.shareDevices})):(a=React.DOM.span(null,"This site is currently using these devices:"),b=this.props.devices.map(this.shareForDevice)),React.DOM.div({className:"PanelWrapper "+(this.props.isDropdownVisible?"shown":"hidden")},g(null,f({toggleDropdown:this.props.toggleDropdown},a,b,c)))}})},{"../utils/Dispatcher":3,"./Button.jsx":5,"./Footer.jsx":7,"./Panel.jsx":9,"./PanelGroup.jsx":10}],12:[function(a,b){b.exports=React.createClass({displayName:"exports",viewForDevice:function(a){var b="device "+a.status,c="images/icons/FX_"+a.type;return"muted"===a.status&&(c+="-mute"),c+="-16x16.svg",React.DOM.img({src:c,className:b})},render:function(){var a="sharing "+this.props.sharing+(this.props.isSharingVisible?" shown":" hidden");return React.DOM.div({id:this.props.id,className:a,onClick:this.props.toggleDropdown},this.props.devices.map(this.viewForDevice))}})},{}],13:[function(a,b){var c=a("./SharingDoorhanger.jsx"),d=a("./SharingIndicator.jsx");b.exports=React.createClass({displayName:"exports",render:function(){return React.DOM.div({className:"BrowserWindow"},React.DOM.div({className:"Toolbar"},d({id:"urlbar-indicator",sharing:this.props.sharing,isSharingVisible:this.props.isSharingVisible,toggleDropdown:this.props.toggleDropdown,devices:this.props.devices}),React.DOM.div({className:"end"})),c(Object.assign({},this.props)))}})},{"./SharingDoorhanger.jsx":11,"./SharingIndicator.jsx":12}]},{},[2]);
//# sourceMappingURL=app.min.map